import { render, screen } from "@testing-library/react";
import { rest } from "msw";
import { setupServer } from "msw/node";
import Experiment1, { getServerSideProps } from "../pages/experiments/index";
import { calculateAverageLast } from "../functions";

const server = setupServer(
  rest.get("https://www.bitstamp.net/api/v2/ticker/", (req, res, ctx) => {
    return res(
      ctx.json([
        {
          timestamp: "1679999208",
          open: "27142",
          high: "28004",
          low: "26541",
          last: "26813",
          volume: "2543.70604142",
          vwap: "27144",
          bid: "26814",
          ask: "26815",
          open_24: "27920",
          percent_change_24: "-3.96",
          pair: "BTC/USD",
        },
        {
          timestamp: "1679999209",
          open: "25109",
          high: "25971",
          low: "24626",
          last: "24771",
          volume: "524.46806148",
          vwap: "25186",
          bid: "24767",
          ask: "24771",
          open_24: "25932",
          percent_change_24: "-4.48",
          pair: "BTC/EUR",
        },
        {
          timestamp: "1679999209",
          open: "22047",
          high: "22813",
          low: "21621",
          last: "21789",
          volume: "29.28527482",
          vwap: "22169",
          bid: "21776",
          ask: "21795",
          open_24: "22786",
          percent_change_24: "-4.38",
          pair: "BTC/GBP",
        },
        {
          timestamp: "1679999209",
          open: "0",
          high: "0",
          low: "0",
          last: "27777",
          volume: "0.00000000",
          vwap: "0",
          bid: "25556",
          ask: "28859",
          open_24: "0",
          percent_change_24: null,
          pair: "BTC/PAX",
        },
      ])
    );
  }),
  rest.get(
    "https://api-pub.bitfinex.com/v2/tickers?symbols=tBTCUSD",
    (req, res, ctx) => {
      return res(
        ctx.json([
          [
            "tBTCUSD",
            26775,
            14.95821739,
            26776,
            26.07934065,
            -1158,
            -0.04145634,
            26775,
            2408.38313295,
            27994,
            26536,
          ],
        ])
      );
    }
  ),
  rest.get(
    "https://api.coinbase.com/v2/exchange-rates?currency=BTC",
    (req, res, ctx) => {
      return res(
        ctx.json({
          data: {
            currency: "BTC",
            rates: {
              AED: "98449.97028102674040163853916604575855",
              AFN: "2311744.46121391881563984351625",
              ALL: "2848972.38186996247294176406053076474095",
              AMD: "10429144.3993333971675710384443611520782",
              ANG: "48140.57405247095047790053875",
              AOA: "13549017.53757191453484166125",
              ARS: "5554024.171147845075168900186494010825",
              AWG: "48253.63500003352635754249999813727565",
              AZN: "45572.87750003166363319249999813727565",
              BAM: "48548.96065002123424532801775",
              BBD: "53615.150000037254487",
              BDT: "2816753.8558080542910983939384400332829",
              BGN: "48450.87173309616608824405125",
              BHD: "10107.742538607023364907188",
              BIF: "55731294.92135633388574520309670525805275",
              BMD: "26807.5750000186272435",
              BND: "35661.37826611718706947565987450790305",
              BOB: "185165.75564062031390109200182277789535",
              BRL: "139483.29770984690120416965498696092955",
              BSD: "26807.5750000186272435",
              BTN: "2205514.00510168221741470689953153258075",
              BWP: "354333.33135202138276467597962107708275",
              BYN: "67638.82246055950151657257225186272435",
              BYR: "676387286.3399410528482789524696137537896",
              BZD: "53930.95663732497660599955175186272435",
              CAD: "36527.1",
              CDF: "55284965.752449814758476263812",
              CHF: "24600.1588517920934203884795",
              CLF: "784.175183900544884126862",
              CLP: "21623937.2388246171109633214923233385188",
              CNY: "184393.2238801281256316904",
              COP: "126076915.59401193787729309494666604575855",
              CRC: "14510264.98563402771303191263994003620125",
              CUC: "26807.5750000186272435",
              CVE: "2737842.77008541219804153898305201413155",
              CZK: "587549.65014412100818509642842323336455",
              DJF: "4766015.70691861180249376769055314609915",
              DKK: "184497.30875799486551532032933395424145",
              DOP: "1468653.292200593497610951204675884245",
              DZD: "3640346.3262943921444955565994134977289",
              EGP: "828391.5981055756079022909",
              ETB: "1444184.432047854007402913816914317426",
              EUR: "24776.2200000014605086",
              FJD: "59343.92877754123512893595",
              FKP: "21781.7250623443491845037003188161743",
              GBP: "21759.4750000153544647",
              GEL: "68984.76842114320633262884802563090725",
              GHS: "324419.17106006415604625457388331454735",
              GIP: "21781.7250623443491845037003188161743",
              GMD: "1651164.3284911473115343442",
              GNF: "231119331.42189221362670828867804687187135",
              GTQ: "209009.3000172647752970496078370299201",
              GYD: "5652676.58915531526233034402975",
              HKD: "210436.78299173545876494251715616660665",
              HNL: "660419.783212908892686642321",
              HRK: "186584.80341888187827459632169969111525",
              HTG: "4155963.0662136665400072456407127864981",
              HUF: "9512917.77037299980933923875324636943935",
              IDR: "404742007.7650612644737503654240401386799",
              ILS: "95139.38498193984207629708092118786445",
              INR: "2203395.9940308158117675459201929409586",
              IQD: "39139059.50002805683481900059830706122",
              ISK: "3671176.76216505091717472925",
              JMD: "4049501.4697362070726840886519955360741",
              JOD: "19023.54116326893032386777160314827885",
              JPY: "3511818",
              KES: "3528216.43261911824874993683333395424145",
              KGS: "2343518.20650163291606467250314241597845",
              KHR: "108784537.79821354307068724090498464117545",
              KMF: "12273585.5531388371143625582973515159427",
              KRW: "34833506.35291489133755127173636848296655",
              KWD: "8210.8831588282345079713535931259569",
              KYD: "22335.964259715520144775226",
              KZT: "12240831.59333902220939801516633395424145",
              LAK: "453538061.08382950342193421060525",
              LBP: "404067507.68982131216599371470982117398415",
              LKR: "8717513.08407371310884919028037211632415",
              LRD: "4319517.72227235719466798907988593826235",
              LSL: "489698.35556385235674667131196500317445",
              LYD: "128205.8965388246121944987429483365263",
              MAD: "275218.97460545176084627246298356065345",
              MDL: "495155.9640268251037229065962695588451",
              MGA: "115754203.66752076027308813553236698884275",
              MKD: "1527885.01667680976482299583198872430515",
              MMK: "56260354.1220148197570940449138378051324",
              MNT: "92952359.14076996350781090478519211917195",
              MOP: "216708.8172775255801217761275",
              MRO: "9181353.1693313796632535585",
              MUR: "1236358.44360202178154112761499852017705",
              MVR: "413246.81089778729198838805010244983925",
              MWK: "27457986.550411329181966063005",
              MXN: "491204.9350200715050770795973601925595",
              MYR: "118140.93271911573633721689925788830415",
              MZN: "1711395.55940896190371251019087674258075",
              NAD: "489535.92635273396590691389826491443885",
              NGN: "12342511.33423482965313376673970979824",
              NIO: "979098.9574360535399264248553012428752",
              NOK: "279205.54027152733840952220666604575855",
              NPR: "3529151.15914421889824466319133395424145",
              NZD: "43012.8682413038790442554999059359092",
              OMR: "10320.648299257171302475065",
              PAB: "26807.5750000186272435",
              PEN: "101071.2864513952293834331185",
              PGK: "94443.2475705156292521289610037254487",
              PHP: "1457194.24141599405702845122241056954665",
              PKR: "7597721.11074182378555908622862590201445",
              PLN: "115924.22111978433181959117464206841355",
              PYG: "192069791.8489307783565767803462214421432",
              QAR: "97403.8320099161578074679194630478479",
              RON: "122584.98816060340772962727980190401545",
              RSD: "2907844.4678270205157296885",
              RUB: "2058132.867874937479756455617508504063",
              RWF: "29407281.9148063586498508299865",
              SAR: "100605.57185470740578164541475",
              SBD: "220361.5370242899771408286978689252363",
              SCR: "349497.87480003027085648380169598099385",
              SDG: "15950507.125010732298725749756169382585",
              SEK: "277542.27648167599701743713126340095935",
              SHP: "21781.7250623443491845037003188161743",
              SKK: "745899.32831551859107419020021048785155",
              SLL: "501502709.31284846915777625",
              SOS: "15241304.58930686880740660114687151640785",
              SRD: "948107.52616190991575234352578048150265",
              STD: "614086354.758060597903861047862",
              SVC: "234495.5013046742448409148474773899363",
              SZL: "489635.996590565322935536197330256398",
              THB: "919124.4883029201240371625577678853664",
              TJS: "292746.1043007925828813011174828557409",
              TMT: "94033.5614625410215430816631175127388",
              TND: "83574.97006260718700245053511580565615",
              TOP: "63201.6728579189103208968174962745513",
              TRY: "512290.0774928562810899456502198014733",
              TTD: "182127.43423733906465154365825931362175",
              TWD: "813768.0838147814199974398118515086348",
              TZS: "62740046.4164118024018406977802178656239",
              UAH: "989913.02687013068806142815679179470465",
              UGX: "101121358.10217314152430946002101963031595",
              UYU: "1042423.58966076599559196524083395424145",
              UZS: "305897059.6545564130752550478278601708859",
              VES: "653241.68260232210471261754589229955375",
              VND: "630190469.05481314151934986430400097118615",
              VUV: "3097346.8629905854336362573376903857618",
              WST: "72667.97267930016409137917229372164385",
              XAF: "16346917.301271366921297690623248434249",
              XAG: "1166.4853179308649734336532226448238",
              XAU: "13.7060965232845236811749495",
              XCD: "72414.6321581753173071854625",
              XOF: "16265002.10339725070125291595681550673545",
              XPD: "18.70414101765049657239395475",
              XPF: "2954785.1459727565528114827410294355777",
              XPT: "27.2813988874844901350284042698099",
              YER: "6708435.27190515302381174780183395424145",
              ZAR: "488706.99925087544429416182440591335095",
              ZMK: "140808128.066347840527845925",
              ZMW: "569466.7488605706096965744735343580362",
              JEP: "21783.3540583762850166465937922630406",
              GGP: "21781.7250623443491845037003188161743",
              IMP: "21781.7250623443491845037003188161743",
              CNH: "184546.0939396628294444163317682036297",
              EEK: "387401.6278402691431291471999701964104",
              LTL: "85489.0885993094128162790650074508974",
              LVL: "17400.9845855370910741465545",
              TMM: "469864409.29758986156793901308201010268895",
              ZWD: "10047479.11000685529420448741231225122375",
              VEF: "65333009106.11340480327981579547036318712745",
              SGD: "35617.51815358308127225144716604575855",
              AUD: "40155.7367819029022137197375",
              USD: "26807.5750000186272435",
              BTC: "1.0",
              BCH: "222.5932109070673344",
              BSV: "636.4873688213733659634923306769447",
              ETH: "15.5678368490698217",
              ETH2: "15.5678368490698217",
              ETC: "1358.6956521739130435",
              LTC: "310.4625892579944117",
              ZRX: "123609.3943139678615575",
              USDC: "26807.5750000186272435",
              BAT: "114090.1312036508841985",
              LOOM: "420841.05180562994022445104788013221295",
              MANA: "48192.7710843373493976",
              KNC: "40916.530278232405892",
              LINK: "3941.7410670293068448",
              DNT: "901094.95798381940303022027310916543175",
              MKR: "39.471087428458654",
              CVC: "278954.9947972802012989868210205037563",
              OMG: "15317.4542391054606724",
              GNT: "118016.42010453699816347660702913203715",
              DAI: "26831.2315535283069493",
              SNT: "1021824.8522972604249491070745189061148",
              ZEC: "749.0636704119850187",
              XRP: "55426.69280382583648221047184908713665",
              REP: "3389.2560582952042027",
              XLM: "289017.3410404624277457",
              EOS: "24491.7952485917217732",
              XTZ: "24832.3814253786938167",
              ALGO: "135226.504394861392833",
              DASH: "489.1171435558816337",
              ATOM: "2457.6062914721061686",
              OXT: "324940.3030305288147477869696967439122",
              COMP: "660.2839220864971938",
              ENJ: "74101.5190811411633938",
              REPV2: "3389.2560582952042027",
              BAND: "16212.7107652399481193",
              NMR: "1497.4543276430068883",
              CGLD: "46707.1461933675852405",
              UMA: "12919.0620760932756282",
              LRC: "80450.5229283990345937",
              YFI: "3.2738582419381241",
              UNI: "4695.9380136182202395",
              BAL: "3944.1508243275222845",
              REN: "280898.8764044943820225",
              WBTC: "0.9980039920159681",
              NU: "142636.10489881511618152623112810455195",
              YFII: "25.11789425358141458633262983138715",
              FIL: "5003.3772796637730468",
              AAVE: "386.1749372465726974",
              BNT: "50505.0505050505050505",
              GRT: "205549.8458376156217883",
              SNX: "11435.1057747284162379",
              STORJ: "79872.2044728434504792",
              SUSHI: "26319.2525332280563232",
              MATIC: "25536.261491317671093",
              SKL: "727272.7272727272727273",
              ADA: "77160.4938271604938272",
              ANKR: "888888.8888888888888889",
              CRV: "30165.9125188536953243",
              ICP: "5694.7608200455580866",
              NKN: "275862.0689655172413793",
              OGN: "254452.9262086513994911",
              "1INCH": "54644.8087431693989071",
              USDT: "26791.419999987690307",
              FORTH: "8375.2093802345058626",
              CTSI: "198019.801980198019802",
              TRB: "1988.2692116512575803",
              POLY: "156632.04791129785207575432150217217955",
              MIR: "289435.6005788712011577",
              RLC: "16556.2913907284768212",
              DOT: "4572.473708276177412",
              SOL: "1356.5760021705216035",
              DOGE: "371057.5139146567717996",
              MLN: "1322.7513227513227513",
              GTC: "14374.0348525569040988683243963733421",
              AMP: "7594213.88102510686861404109773424400895",
              SHIB: "2591355727.406343861140595828757853999754",
              CHZ: "235878.3545976122056199460250765334799",
              KEEP: "144092.2190201729106628",
              LPT: "4264.3923240938166311",
              QNT: "225.34001597124063966769207338913635",
              BOND: "6795.3295310566866476925031688463897",
              RLY: "2136061.7529895320519584401593630247584",
              CLV: "453213.44040606301399289362848729923475",
              FARM: "809.4074577300297984573429943232073",
              MASK: "4865.25862069303690178212794995070495",
              ANT: "12052.5491141376401109",
              FET: "79020.11790720302877201344325773266545",
              PAX: "26837.09580540457194370913479804929795",
              ACH: "864927.8892694917481478764622184624099",
              ASM: "2202758.8331979151398717559120793814693",
              PLA: "130992.30393363609733840069570023634035",
              RAI: "9695.32549729425915367335895100361855",
              TRIBE: "100626.3730151495572083267566982387471",
              ORN: "30165.9125188536953243",
              IOTX: "973758.6269530921627944315310569840393",
              UST: "897144.5065432424356804926322741563621",
              QUICK: "310.95667555989702397864313961425985",
              AXS: "3355.1417547391377286",
              REQ: "284090.9090909090909091",
              WLUNA: "227903301.6571228077660353980781145543507",
              TRU: "364963.5036496350364964",
              RAD: "13559.3220338983050847",
              COTI: "377305.77058435787753505119809949311245",
              DDX: "72403.98379478359902512765530102732035",
              SUKU: "349284.36482108960531569984527655138635",
              RGT: "93713.70572167762513575249011108904465",
              XYO: "5405405.4054054054054054",
              ZEN: "2760.1435274634280983",
              AST: "217065.384615535443050141093117258079",
              AUCTION: "4896.360730597009052555707762216854",
              BUSD: "26817.33212225336786395388889945878115",
              JASMY: "6106509.11162155518175928243166357027225",
              WCFG: "99206.3492063492063492",
              BTRST: "28401.0224368077250781",
              AGLD: "70030.23772209672768609305381421035685",
              AVAX: "1628.7308115151268374",
              FX: "144710.256410356962033427395411505386",
              TRAC: "71764.3555080139928942848253242204014",
              LCX: "331982.35294140714961355799535679262195",
              ARPA: "706391.96310984524956826547760169818845",
              BADGER: "9837.6422018416985137030733948030187",
              KRL: "94111.1988766671135555939011761863987",
              PERP: "33980.9544936222926939741374060422234",
              RARI: "16966.81962026495418911775316472201355",
              DESO: "2650.2792881877053486695081570526109",
              API3: "18392.8473413506883353578473418171675",
              NCT: "2551887.19657483362728081220966279889245",
              SHPING: "5900852.9606028235174579083601138976208",
              UPI: "11910539.5353819023790098927115497963892",
              CRO: "405254.3461831992013004702683287402459",
              MTL: "24459.4662408929083036977372264405306",
              ABT: "229026.6979924701168728410700551546641",
              CVX: "5397.67945233436612988721710490030915",
              AVT: "24042.6681614516835783720627802356462",
              MDT: "461881.0303242354787724794038587423217",
              VGX: "83682.1445294790922238363859839723415",
              ALCX: "1337.03615960192776919855985122413605",
              COVAL: "1912777.38137842506143661008651407865235",
              FOX: "832533.3850937461870869113664592108194",
              MUSD: "26895.8511072579626831131522553398368",
              CELR: "1130405.8612700243411032523139364960935",
              GALA: "715345.56370963648500963599566437356265",
              POWR: "156861.1761264986961854272498534496754",
              GYEN: "3519902.17962429454233283489495715357655",
              ALICE: "19039.47088069504702705193181767380245",
              INV: "574.4070066427826718238065144167367",
              LQTY: "12782.8600720113625905463953466656876",
              PRO: "61725.93829154645810700025500727877145",
              SPELL: "41264642.4998362614389925783198649077366",
              ENS: "2097.61932707501008650779733968348115",
              DIA: "76875.31365160267727192554030584031245",
              BLZ: "358390.04010720089798811621657685279155",
              CTX: "16004.52238807082147471055970096430205",
              ERN: "15676.94444445533755362130116957975015",
              IDEX: "524097.26295246583136255470918907777505",
              MCO2: "18174.62711865669766305851695000497555",
              POLS: "67035.69642415260711636092210612120505",
              SUPER: "233545.9772619996267066533970025359579",
              UNFI: "5911.26240353222224923607221619765545",
              STX: "31003.96114036734660541388032649553645",
              KSM: "847.26848925469727480261377990518465",
              GODS: "120738.52632535525552136528363328025755",
              IMX: "25991.44366881774971636167296865496115",
              RBN: "134823.2202580965487114578528680241369",
              BICO: "76483.80884456099133233020328146023405",
              GFI: "44824.972828389980429288596271856402",
              ATA: "188852.23670319568240297487759712696405",
              GLM: "118121.06190799130851735378111987663875",
              MPL: "6248.85198135632336053436480186045985",
              PLU: "2848.83900106467951543858395375788635",
              SWFTC: "26489698.61661919688159639416007951522385",
              SAND: "45047.17694508255264341667324800045355",
              OCEAN: "81272.0175838066603386221752304688186",
              GNO: "252.53238189457548066316530095487675",
              FIDA: "69630.0649351133174459543506493022669",
              ORCA: "34697.87082580718059632035658858031725",
              CRPT: "306898.3972526459909035546451063884251",
              QSP: "1638104.18576343582331683687519117200505",
              RNDR: "24220.7941814407558446571268530185498",
              NEST: "1481490.74330028335213838070530584921595",
              PRQ: "266212.26415112837350147950099282853605",
              HOPR: "430643.7751007008392745442369478061263",
              JUP: "4608884.208719784621471960869939837808",
              MATH: "231699.0060502906404339061668098447739",
              SYN: "31989.94630073821754801297732619098625",
              AIOZ: "981962.454213136528083971611720929405",
              WAMPL: "5421.14762386625550581621587549662975",
              AERGO: "235982.17429593861998796095070414664545",
              INDEX: "14851.8421052734788111180747930177525",
              TONE: "2351541.66666830063572395267543882524685",
              HIGH: "14150.21113751313069136733240918544345",
              GUSD: "26820.98549276500891021839044464021875",
              FLOW: "29556.31201766111124618036108098827725",
              ROSE: "494787.28313065018925521823458854171495",
              OP: "13007.071809810105979152498787394274",
              APE: "6580.96845465045541541597244433753485",
              MINA: "37453.1835205992509363",
              MUSE: "4730.0529333954350681577525365149575",
              SYLO: "14810814.9171373631178669362154695515119",
              CBETH: "15.41174526065601667870082704668495",
              DREP: "60268.82868709223849145598920931653915",
              ELA: "23463.960612707770602791575492748955",
              FORT: "205186.1844624464378238647397619706229",
              ALEPH: "432729.21711087372464932337974171066185",
              DEXT: "101466.97577599783205129298448141255185",
              FIS: "51812.08929265293266923421820657726615",
              BIT: "51972.8092284192073128741527722421688",
              GMT: "74434.47174793454756060275336676941395",
              GST: "1338137.36990633824578414283244327621445",
              MEDIA: "2571.47002398260239724474220641815755",
              C98: "131506.3772382566936805941268081212727",
              ARB: "23704.63789903495261172158082099402415",
              "00": "293139.1470751080081446980153096819134",
              ACS: "3263823.1946014363147733919200893397379",
              APT: "2463.9315257370074420016911773471644",
              AUDIO: "94576.0275181465071334256279772142557",
              AURORA: "154510.5187320958335457357636882669434",
              AXL: "44675.5687026391581109867556865408819",
              BLUR: "53663.4471024294414652466174560446129",
              BOBA: "116706.90030482641273245322921129312695",
              DAR: "165991.1764707035734664002476774649488",
              DYP: "128994.20171311051414687192594488282435",
              EGLD: "652.7288775266271397808229842910096",
              EUROC: "24777.09228709148125250857144565251005",
              GAL: "16801.98997180735051634145330639368445",
              GHST: "26608.01488835595796755882754370626845",
              HBAR: "454057.84214123691029606966802097854015",
              HFT: "45797.51430771098747453841013837198245",
              ILV: "480.9396304273160894774040183038235",
              INJ: "7245.29054054557572765763513568891805",
              KAVA: "31792.66484821943417466061195417290195",
              LDO: "13038.7037937833778412165758746746104",
              LIT: "28041.39644353412998136804393379480675",
              LOKA: "57324.0136854883501257033903555790266",
              LSETH: "15.451808878254298389405532006386",
              MAGIC: "20655.3723465875306866886845549358889",
              METIS: "1123.77174596598690559565552267122755",
              MNDE: "615558.55338733931615235171928777459305",
              MONA: "64.8042521817369442696556442178503",
              MSOL: "1223.8107737967861870716856873801399",
              MXC: "1419892.7436450544080840819491518477977",
              NEAR: "14652.95162613753780626606381455619205",
              OOKI: "7190873.1223225931452909350858373095975",
              PNG: "613726.5338832103313928610073265122403",
              POND: "2947506.87190968963755833446811511964345",
              PRIME: "18113.22635136393797876533783829093295",
              PUNDIX: "61733.0454807567696134231807713828221",
              PYR: "8078.2205815936787769495065532819675",
              QI: "3080091.34256547678925945521787146732885",
              RARE: "240103.67219004592158034939879024784895",
              RPL: "659.55406569119562644032199565007755",
              STG: "42598.2399083826279114031957728845733",
              T: "694586.73403338844949157675314096181765",
              TIME: "698.8418925969390117593639199039126",
              VOXEL: "116706.90030482641273245322921129312695",
              WAXL: "44701.6424879416824106164840750212727",
              XCN: "6710281.60200716576924262995932495949925",
              XMON: "8.6054659073482455129893281218729",
            },
          },
        })
      );
    }
  ),
  rest.get(
    "https://www.bitstamp.net/api/v2/trading-pairs-info/",
    (req, res, ctx) => {
      return res(
        ctx.json([
          {
            name: "BTC/USD",
          },
          {
            name: "TES/TTT",
          },
        ])
      );
    }
  )
);

beforeAll(() => server.listen());
afterEach(() => server.resetHandlers());
afterAll(() => server.close());

const props = {
  bitstampData: [
    {
      pair: "BTC/USD",
      last: 40000,
    },
  ],
  finexLast: 50000,
  coinbaseBTCtoOthers: {
    USD: 42000,
    EUR: 36000,
    GBP: 31000,
    JPY: 4600000,
    KRW: 45000000,
  },
  tradingPairs: [
    "TES/TTT",
    "BTC/USD",
    "BTC/EUR",
    "BTC/GBP",
    "BTC/JPY",
    "BTC/KRW",
  ],
};

describe("Experiment1 page", () => {
  it("renders average ticket value correctly", () => {
    // console.log(props);
    const average = calculateAverageLast(
      props.bitstampData[0].last,
      Number(props.coinbaseBTCtoOthers["USD"]),
      Number(props.finexLast)
    );
    const secectedPair = "BTC/USD";

    render(<Experiment1 {...props} />);

    const averageTicketValue = screen.getByTestId(
      "average-ticket-value"
    ).textContent;
    console.log(averageTicketValue);
    expect(averageTicketValue).toBe("44000");
  });

  // it("gets correct server-side props", async () => {
  //   const { props } = await getServerSideProps();
  //   expect(props.bitstampData).toHaveLength(10);
  //   expect(props.finexLast).toBeGreaterThan(0);
  //   expect(props.coinbaseBTCtoOthers).toHaveProperty("USD");
  // });
});
